graph TD
    subgraph "Sales Flow"
        O[Order] --> W[Webhook]
        W --> SC[Generate Shopper Code]
        SC --> Q[Queue]
        Q --> P[Processing]
    end
    
    subgraph "Shopper Code Generation"
        SC --> EI[Extract Customer Info]
        EI --> GC[Generate Code FFF-LLL-PPP]
        GC --> SS[Store Shopper Code]
    end
    
    subgraph "Calculations"
        P --> B[Base Commission]
        P --> V[Volunteer Bonus]
        P --> S[Super Bonus]
        B & V & S --> F[Final Earnings]
    end
    
    subgraph "Updates"
        F --> U[Update Records]
        U --> I[Inventory Status]
        U --> E[Earnings Record]
        U --> SR[Sales Record with Shopper Code]
    end
