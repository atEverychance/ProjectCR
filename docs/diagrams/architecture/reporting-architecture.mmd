flowchart TD
    subgraph DataSources[Data Sources]
        Sales[(Sales Data)]
        Inventory[(Inventory Data)]
        Events[(Event Data)]
        Users[(User Data)]
        Financial[(Financial Data)]
        ShopperCodes[(Shopper Codes)]
    end

    subgraph ProcessingLayer[Processing Layer]
        DataCollection[Data Collection Service]
        Aggregation[Data Aggregation]
        Calculation[Calculations Engine]
        Generation[Report Generation]
        ShopperCodeGen[Shopper Code Generation]
    end

    subgraph ReportTypes[Report Types]
        SalesReports[Sales Reports]
        InventoryReports[Inventory Reports]
        EventReports[Event Reports]
        FinancialReports[Financial Reports]
        OperationalReports[Operational Reports]
        SystemReports[System Reports]
        ShopperInvoices[Shopper Invoices]
    end

    subgraph OutputHandlers[Output Handlers]
        PDFGenerator[PDF Generator]
        ChequeFormat[Cheque Formatter]
    end

    %% Data Flow
    Sales & Inventory & Events & Users & Financial --> DataCollection
    DataCollection --> ShopperCodeGen
    ShopperCodeGen --> ShopperCodes
    ShopperCodes --> Aggregation
    DataCollection --> Aggregation
    Aggregation --> Calculation
    Calculation --> Generation

    %% Report Generation Flow
    Generation --> SalesReports & InventoryReports & EventReports & FinancialReports & OperationalReports & SystemReports & ShopperInvoices

    %% Output Processing
    SalesReports & InventoryReports & EventReports & OperationalReports & SystemReports & ShopperInvoices --> PDFGenerator
    FinancialReports --> PDFGenerator & ChequeFormat

    %% Styling
    style DataSources fill:#f9f,stroke:#333,stroke-width:2px
    style ProcessingLayer fill:#bbf,stroke:#333,stroke-width:2px
    style ReportTypes fill:#bfb,stroke:#333,stroke-width:2px
    style OutputHandlers fill:#fbb,stroke:#333,stroke-width:2px